<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Block SuperCollider</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/aaaakshat/cm-web-fonts@latest/fonts.css" />
    <link rel="stylesheet" type="text/css" media="all" href="css/blksc3.css" />
    <link rel="icon" type="image/png" href="https://rohandrape.net/data/png/rd.512.png" />
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <!--
    <script src="local/blockly/blockly_compressed.js"></script>
    <script src="local/blockly/javascript_compressed.js"></script>
    <script src="local/blockly/msg/js/en.js"></script>
    <script src="local/blockly/blocks_compressed.js"></script>
    -->
    <script src="js/blksc3-common.js"></script>
    <script src="js/blksc3-gen.js"></script>
    <script src="js/blksc3-gen-ugen.js"></script>
    <script src="js/blksc3.js"></script>
    <script src="https://unpkg.com/commonmark@0.30.0/dist/commonmark.js"></script>
    <!--
    <script src="local/commonmark.js/dist/commonmark.js"></script>
    -->
    <script>
      Blockly.HSV_SATURATION = 0.20;
      Blockly.HSV_VALUE = 0.95;
      Blockly.Msg['VARIABLES_SET'] = '%1 ≔ %2';
      Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH'] = '⟦⟧';
      blk_load_and_process_json('json/blksc3.json', Blockly.defineBlocksWithJsonArray);
      blk_load_and_process_json('json/blksc3-ugen.json', Blockly.defineBlocksWithJsonArray);
      blk_load_and_process_utf8('xml/blksc3.xml', blk_inject_with_xml_toolbox);
      window.onload = blk_init;
    </script>
  </head>
  <body>
    <!-- <p>Block SuperCollider</p> -->
    <div id="blocklyContainer" style="height: 900px; width: 1500px;"></div> <!-- 720 900 ; 900 1350 -->
    <div id="blkEdit">
      <input type="file" id="xmlInputFile" accept=".xml" onchange="blk_read_input_xml()" style="display:none">
      <button id="xmlInputFileSelect" title="Select local .xml file and load into workspace">Load Xml</button>
      <button title="Copy workspace Xml to clipboard" onclick="navigator.clipboard.writeText(blk_get_xml())">Copy Xml</button>
<!--
      <input type="file" id="jsonInputFile" accept=".json" onchange="blk_read_input_json()" style="display:none">
      <button id="jsonInputFileSelect" title="Select local .json file and load into workspace">Load Json</button>
      <button title="Copy workspace Json to clipboard" onclick="navigator.clipboard.writeText(blk_get_json())">Copy Json</button>
-->
      <button title="Cleanup workspace" onclick="blk_workspace.cleanUp()">Cleanup</button>
      <button title="Center workspace" onclick="blk_workspace.scrollCenter()">Center</button>
      <button title="Fit to workspace" onclick="blk_workspace.zoomToFit()">Fit</button>
      <button title="Draw current workspace as UGen graph" onclick="blk_send_stc('draw')">Draw Stc</button>
      <button title="Send current workspace Stc to Websocket" onclick="blk_send_stc('play')">Send Stc</button>
      <button title="Send reset command to Websocket" onclick="blk_sc3_reset()">Send Reset</button>
      <select title="Graph programs" id="blkGraphMenu"></select>
      <select title="Help programs" id="blkHelpMenu"></select>
      <select title="Guide" id="blkGuideMenu"></select>
      <button title="Delete all blocks and comments from Workspace" onclick="blk_workspace.clear()">Clear</button>
      <button title="Set Websocket address and reinitialise" onclick="blk_websocket_dialog()">Websocket</button>
    </div>

    <div id="blkCtl">
      <details open>
        <summary>Notes</summary>
        <div id="blkNotes"></div>
      </details>
      <details id="blkUi">
        <summary>Ui</summary>
        <div id="blkUi">
          <details id="blkCc">
            <summary>Cc</summary>
            <div>
              <input id="cc1" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(1)">
              <input id="cc2" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(2)">
              <input id="cc3" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(3)">
              <input id="cc4" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(4)">
              <input id="cc5" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(5)">
              <input id="cc6" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(6)">
              <input id="cc7" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(7)">
              <input id="cc8" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(8)">
            </div>
          </details>
          <details id="blkSwC">
            <summary>Sw:maintained</summary>
            <div>
              <input id="swC1" type="checkbox" oninput="blk_sw_maintained_send(1)">
              <input id="swC2" type="checkbox" oninput="blk_sw_maintained_send(2)">
              <input id="swC3" type="checkbox" oninput="blk_sw_maintained_send(3)">
              <input id="swC4" type="checkbox" oninput="blk_sw_maintained_send(4)">
              <input id="swC5" type="checkbox" oninput="blk_sw_maintained_send(5)">
              <input id="swC6" type="checkbox" oninput="blk_sw_maintained_send(6)">
              <input id="swC7" type="checkbox" oninput="blk_sw_maintained_send(7)">
              <input id="swC8" type="checkbox" oninput="blk_sw_maintained_send(8)">
            </div>
          </details>
          <details id="blkSwB">
            <summary>Sw:momentary</summary>
            <div>
              <button id="swB1" onmousedown="blk_sw_momentary_send(1, 1)" onmouseup="blk_sw_momentary_send(1, 0)"></button>
              <button id="swB2" onmousedown="blk_sw_momentary_send(2, 1)" onmouseup="blk_sw_momentary_send(2, 0)"></button>
              <button id="swB3" onmousedown="blk_sw_momentary_send(3, 1)" onmouseup="blk_sw_momentary_send(3, 0)"></button>
              <button id="swB4" onmousedown="blk_sw_momentary_send(4, 1)" onmouseup="blk_sw_momentary_send(4, 0)"></button>
              <button id="swB5" onmousedown="blk_sw_momentary_send(5, 1)" onmouseup="blk_sw_momentary_send(5, 0)"></button>
              <button id="swB6" onmousedown="blk_sw_momentary_send(6, 1)" onmouseup="blk_sw_momentary_send(6, 0)"></button>
              <button id="swB7" onmousedown="blk_sw_momentary_send(7, 1)" onmouseup="blk_sw_momentary_send(7, 0)"></button>
              <button id="swB8" onmousedown="blk_sw_momentary_send(8, 1)" onmouseup="blk_sw_momentary_send(8, 0)"></button>
            </div>
          </details>
        </div>
      </details>
    </div>
  </body>
</html>

<!--
<button title="Copy current workspace Svg to clipboard" onclick="navigator.clipboard.writeText(blk_get_svg())">Copy Svg</button>
-->
