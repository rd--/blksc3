<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Block SuperCollider</title>
    <link rel="stylesheet" type="text/css" media="all" href="sw/blksc3/css/blksc3.css" />
    <link rel="icon" type="image/png" href="https://rohandrape.net/data/png/rd.512.png" />
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <script src="sw/blksc3/js/blksc3-gen.js"></script>
    <script src="sw/blksc3/js/blksc3-gen-ugen.js"></script>
    <script src="sw/blksc3/js/blksc3.js"></script>
    <script src="https://unpkg.com/commonmark@0.30.0/dist/commonmark.js"></script>
    <script>
      Blockly.HSV_SATURATION = 0.20;
      Blockly.HSV_VALUE = 0.95;
      blk_load_and_process_json('sw/blksc3/json/blksc3.json', Blockly.defineBlocksWithJsonArray);
      blk_load_and_process_json('sw/blksc3/json/blksc3-ugen.json', Blockly.defineBlocksWithJsonArray);
      blk_load_and_process_utf8('sw/blksc3/xml/blksc3.xml', blk_inject_with_xml_toolbox);
      window.onload = blk_init;
    </script>
  </head>
  <body>
    <p>Block SuperCollider</p>
    <div id="blocklyContainer" style="height: 900px; width: 1500px;"></div> <!-- 720 900 ; 900 1350 -->
    <div id="blkEdit">
      <input type="file" id="xmlInputFile" accept=".xml" onchange="blk_read_input_xml()" style="display:none">
      <button id="xmlInputFileSelect" title="Select local .xml file and load into workspace">Load Xml</button>
      <button title="Copy workspace Xml to clipboard" onclick="navigator.clipboard.writeText(blk_get_xml())">Copy Xml</button>
<!--
      <input type="file" id="jsonInputFile" accept=".json" onchange="blk_read_input_json()" style="display:none">
      <button id="jsonInputFileSelect" title="Select local .json file and load into workspace">Load Json</button>
      <button title="Copy workspace Json to clipboard" onclick="navigator.clipboard.writeText(blk_get_json())">Copy Json</button>
-->
      <button title="Send current workspace Stc to Websocket" onclick="blk_send_stc('play')">Send Stc</button>
      <button title="Send reset command to Websocket" onclick="blk_sc3_reset()">Send Reset</button>
      <button title="Draw current workspace as UGen graph" onclick="blk_send_stc('draw')">Draw Stc</button>
      <button title="Center workspace" onclick="blk_workspace.scrollCenter()">Center</button>
      <button title="Fit to workspace" onclick="blk_workspace.zoomToFit()">Fit</button>
      <select title="Example programs" id="blkGraphMenu"></select>
      <select title="Help programs" id="blkHelpMenu"></select>
      <select title="Guide" id="blkGuideMenu"></select>

      <button title="Cleanup workspace" onclick="blk_workspace.cleanUp()">Cleanup</button>
      <button title="Delete all blocks and comments from Workspace" onclick="blk_workspace.clear()">Clear Workspace</button>
    </div>

    <div id="blkCtl">
      <div id="blkNotes"></div>
      <details id="blkSwCc">
        <summary>Ctl</summary>
        <div>
          <button onpointerdown="blk_sw_send(1, 1)" onpointerup="blk_sw_send(1, 0)"></button>
          <button onpointerdown="blk_sw_send(2, 1)" onpointerup="blk_sw_send(2, 0)"></button>
          <button onpointerdown="blk_sw_send(3, 1)" onpointerup="blk_sw_send(3, 0)"></button>
          <button onpointerdown="blk_sw_send(4, 1)" onpointerup="blk_sw_send(4, 0)"></button>
          <button onpointerdown="blk_sw_send(5, 1)" onpointerup="blk_sw_send(5, 0)"></button>
          <button onpointerdown="blk_sw_send(6, 1)" onpointerup="blk_sw_send(6, 0)"></button>
          <button onpointerdown="blk_sw_send(7, 1)" onpointerup="blk_sw_send(7, 0)"></button>
          <button onpointerdown="blk_sw_send(8, 1)" onpointerup="blk_sw_send(8, 0)"></button>
        </div>
        <div>
          <input id="cc1" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(1)">
          <input id="cc2" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(2)">
          <input id="cc3" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(3)">
          <input id="cc4" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(4)">
          <input id="cc5" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(5)">
          <input id="cc6" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(6)">
          <input id="cc7" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(7)">
          <input id="cc8" type="range" min="0" max="1" step="0.01" value="0" oninput="blk_cc_send(8)">
        </div>
      </details>
    </div>

  </body>
</html>

<!--
<button title="Copy current workspace Svg to clipboard" onclick="navigator.clipboard.writeText(blk_get_svg())">Copy Svg</button>
-->
