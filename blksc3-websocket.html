<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Block SuperCollider</title>
    <link rel="icon" type="image/png" href="lib/jssc3/png/os.512.png" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/aaaakshat/cm-web-fonts@latest/fonts.css" />
    <link rel="stylesheet" type="text/css" media="all" href="css/blksc3.css" />
    <script src="lib/blockly/blockly_compressed.js"></script>
    <script src="lib/blockly/javascript_compressed.js"></script>
    <script src="lib/blockly/msg/js/en.js"></script>
    <script src="lib/blockly/blocks_compressed.js"></script>
    <script src="lib/commonmark.js/dist/commonmark.js"></script>
    <script src="lib/jssc3/js/jssc3-base.js"></script>
    <script src="js/blksc3-gen.js"></script>
    <script src="js/blksc3-gen-ugen.js"></script>
    <script src="js/blksc3-controllers.js"></script>
    <script src="js/blksc3-layout.js"></script>
    <script src="js/blksc3-websocket.js"></script>
    <script src="js/blksc3.js"></script>
    <script>
window.onload = function() {
    blk_init('.stc', false, -1, true, 'e', null, false);
    sc3_websocket_init('localhost', 9160);
};
    </script>
  </head>
  <body>
    <div id="blocklyContainer"></div>
    <div id="blkEdit">
      <div id="blkMenu">
        <select id="programMenu" title="Program (p)" accesskey="p"></select>
        <select id="helpMenu" title="Help (h)" accesskey="h"></select>
        <select id="guideMenu" title="Guide (g)" accesskey="g"></select>
        <select id="userMenu" title="User (u)" accesskey="u"><option value=''>--User--</option></select>
      </div>
      <div id="blkCmd">
        <input type="file" id="xmlInputFile" accept=".xml" onchange="blk_read_input_xml()" style="display:none">
        <input type="file" id="userProgramArchiveFile" accept=".json" onchange="user_program_read_archive()" style="display:none">
        <button id="xmlInputFileSelect" title="Select and load .xml file to workspace (l)" accesskey="l"><u>L</u>oad</button>
        <button title="Copy workspace xml to clipboard (c)"  accesskey="c" onclick="navigator.clipboard.writeText(blk_get_xml())"><u>C</u>opy</button>
        <button title="Cleanup workspace (o)" accesskey="o" onclick="blk_workspace.cleanUp()">Cleanup</button>
        <button title="Center drawing in workspace" onclick="blk_workspace.scrollCenter()">Center</button>
        <button title="Fit drawing to workspace (=)" accesskey="=" onclick="blk_workspace.zoomToFit()">Fit</button>
        <button title="Draw current workspace as UGen graph (i)" accesskey="i" onclick="blk_send_stc('draw')">Draw</button>
        <button title="Send current workspace stc (,)" accesskey="," onclick="blk_send_stc('play')">Play</button>
        <button title="Send reset command (.)" accesskey="." onclick="blk_sc3_reset()">Reset</button>
        <button title="Delete all blocks from workspace (k)" accesskey="k" onclick="blk_workspace.clear()">Clear</button>
        <button title="Save document to local storage (s)" accesskey="s" onclick="ui_save_program()">Save</button>
        <button title="Set websocket address and reinitialise (w)" accesskey="w" onclick="sc3_websocket_dialog()"><u>W</u>ebsocket</button>
        <select id="actionsMenu" title="Actions">
          <option value=''>&#x2630;</option>
          <option value='setBlockSize'>Block Size</option>
          <option value='userBackup'>Backup</option>
          <option value='userRestore'>Restore</option>
          <option value='userPurge'>Purge</option>
        </select>
        <select id="blkLayoutMenu" title="System layouts (y)" accesskey="y">
          <option value=''>--Display--</option>
          <option value='%×%'>%×%</option>
          <option value='1366×768'>1366×768</option>
          <option value='1440×900'>1440×900</option>
          <option value='1680×1050'>1680×1050</option>
          <option value='1920×1080'>1920×1080</option>
        </select>
        ⓘ <span id="statusText">&nbsp;</span>
      </div>
    </div>

    <div id="blkCtl">
      <details open>
        <summary>Notes</summary>
        <div id="blkNotes">
          <h2>Block SuperCollider</h2>
          <p><em>blksc3</em> is a visual editor for SuperCollider.</p>
          <p>There is a <em>Guide</em>, the menu is below the workspace.</p>
          <p>If the <em>status area</em> (ⓘ) says <em>Loading...</em> please wait.</p>
        </div>
      </details>
      <div id="uiCtlContainer"></div>
    </div>
  </body>
</html>

<!--
<button title="Copy current workspace Svg to clipboard" onclick="navigator.clipboard.writeText(blk_get_svg())">Copy Svg</button>
-->
